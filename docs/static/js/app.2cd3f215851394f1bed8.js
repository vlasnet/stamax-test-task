webpackJsonp([1],{"3m73":function(t,e){},"4wTC":function(t,e){},"6oi9":function(t,e){},FHhW:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=new a.a,s={name:"DropDown",data:function(){return{newEvent:"",showDropDown:!1,isSearchList:!1,resultList:[]}},methods:{closePopup:function(){this.showDropDown=!1},getFormattedDate:function(t){return t&&t.split(",").length>1?t.split(",").join("-"):t.split(".").join("-")},createEvent:function(){var t=this.newEvent.split(", "),e={date:this.getFormattedDate(t[0])+" "+t[1],title:t[2],participants:[]};i.$emit("createEvent",e),this.closePopup()},setDropdownClass:function(){return this.isSearchList?"search-list":"dropdown"}},mounted:function(){var t=this;i.$on("showDropDown",function(e){t.showDropDown=!0,t.isSearchList=e.isSearchList,t.resultList=e.searchedEventList})},destroyed:function(){i.$off("showDropDown")}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showDropDown?n("div",{class:t.setDropdownClass(),attrs:{role:"dialog"}},[n("button",{staticClass:"close-dropdown",on:{click:t.closePopup}}),t._v(" "),t.isSearchList?t._e():n("div",{staticClass:"dropdown-wrapper"},[n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newEvent,expression:"newEvent"}],staticClass:"form-control dropdown-new-event",attrs:{type:"text",placeholder:"05.08.2018, 14:00, День рождения","aria-label":"Event","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.newEvent},on:{input:function(e){e.target.composing||(t.newEvent=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"dropdown-buttons"},[n("button",{staticClass:"button",on:{click:t.createEvent}},[t._v("Создать")])])]),t._v(" "),t.isSearchList?n("div",{staticClass:"dropdown-wrapper"},t._l(t.resultList,function(e){return n("div",{key:e.id,staticClass:"result-wrapper"},[n("div",[t._v(t._s(e.title))]),t._v(" "),n("div",[t._v(t._s(e.date))])])})):t._e()]):t._e()},staticRenderFns:[]};var o={name:"Header",components:{ADropDown:n("VU/8")(s,r,!1,function(t){n("W0Y6")},"data-v-1d1e50e1",null).exports},data:function(){return{searchWord:""}},watch:{searchWord:function(){i.$emit("searchingStarted",this.searchWord)}},methods:{showDropDown:function(){i.$emit("showDropDown",{isSearchList:!1})}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"container header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"buttons-wrapper col-sm-9"},[n("button",{staticClass:"btn btn-sm btn-primary button",on:{click:t.showDropDown}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary button"},[t._v("\n        Обновить\n      ")])]),t._v(" "),n("div",{staticClass:"input-group input-group-sm col-sm-3 search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchWord,expression:"searchWord"}],staticClass:"form-control search-field",attrs:{type:"text",placeholder:"Событие, дата или участник","aria-label":"Username","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.searchWord},on:{input:function(e){e.target.composing||(t.searchWord=e.target.value)}}})]),t._v(" "),n("a-drop-down")],1)])},staticRenderFns:[]};var c=n("VU/8")(o,u,!1,function(t){n("3m73")},"data-v-02f938f1",null).exports,d=n("Gu7T"),p=n.n(d),l=n("Dd8w"),h=n.n(l),v=n("mvHQ"),m=n.n(v),f={name:"Day",data:function(){return{}},props:{dayName:String,date:String,event:Object},computed:{preparedDate:function(){return this.dayName?this.dayName+", "+this.date:this.date},hasEvent:function(){return null!==this.event}},methods:{getParticipantsList:function(t){return t.participants.map(function(t){return(t.name||"")+" "+(t.surname||"")}).join(", ")}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"day-wrapper"},[n("div",{staticClass:"day-date"},[t._v(t._s(t.preparedDate))]),t._v(" "),t.hasEvent?n("div",{staticClass:"event"},[n("div",{staticClass:"event-title"},[t._v(t._s(this.event.title))]),t._v(" "),n("div",{staticClass:"event-participants"},[t._v(t._s(t.getParticipantsList(this.event)))])]):t._e()])},staticRenderFns:[]};var g=n("VU/8")(f,w,!1,function(t){n("QBaJ")},"data-v-ff20429e",null).exports,b={name:"Popup",data:function(){return{initialEvent:{title:"",date:"",participants:null,description:""},newEvent:[],showPopup:!1,day:null,eventId:"",top:"",left:""}},methods:{closePopup:function(){this.showPopup=!1},setEventData:function(t){if(this.newEvent=h()({},this.initialEvent),t){var e=t.id,n=t.title,a=t.date,i=t.participants,s=t.description;this.eventId=e,this.newEvent=h()({},this.newEvent,{id:t.id,title:n,date:a,description:s,participants:i.map(function(t){return(t.name||"")+" "+(t.surname||"")}).join(", ")})}},getFormattedDate:function(t){return t&&t.split(",").length>1?t.split(",").join("-"):t.split(".").join("-")},getHandlingParticipants:function(t){return t?t.split(", ").map(function(t){return{name:t.split(" ")[0],surname:t.split(" ")[1]}}):[]},updateEvent:function(){this.newEvent=h()({},this.newEvent,{date:this.getFormattedDate(this.newEvent.date),participants:this.getHandlingParticipants(this.newEvent.participants)}),this.newEvent.id?i.$emit("updateEvent",this.newEvent):i.$emit("createEvent",this.newEvent),this.closePopup()},deleteSelectedEvent:function(){i.$emit("deleteEvent",this.eventId),this.closePopup()}},mounted:function(){var t=this;i.$on("showPopup",function(e,n,a,i){t.showPopup=!0,t.day=e,t.top=a,t.left=i,t.setEventData(n)}),i.$on("closePopup",function(){return t.closePopup()})},destroyed:function(){i.$off("showPopup"),i.$off("closePopup")}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopup,expression:"showPopup"}],staticClass:"popup",style:{position:"absolute",top:this.top+"px",left:this.left+"px"},attrs:{role:"dialog"}},[n("button",{staticClass:"close-popup",on:{click:t.closePopup}}),t._v(" "),n("div",{staticClass:"popup-wrapper"},[n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newEvent.title,expression:"newEvent.title"}],staticClass:"form-control popup-title",attrs:{type:"text",placeholder:"Событие","aria-label":"Event","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.newEvent.title},on:{input:function(e){e.target.composing||t.$set(t.newEvent,"title",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newEvent.date,expression:"newEvent.date"}],staticClass:"form-control popup-date",attrs:{type:"text",placeholder:"День, месяц, год","aria-label":"Date","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.newEvent.date},on:{input:function(e){e.target.composing||t.$set(t.newEvent,"date",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newEvent.participants,expression:"newEvent.participants"}],staticClass:"form-control popup-participants",attrs:{type:"text",placeholder:"Имена участников","aria-label":"Participants","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.newEvent.participants},on:{input:function(e){e.target.composing||t.$set(t.newEvent,"participants",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"input-group input-group-sm"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newEvent.description,expression:"newEvent.description"}],staticClass:"form-control popup-description",attrs:{rows:"6",placeholder:"Описание","aria-label":"Description","aria-describedby":"inputGroup-sizing-sm"},domProps:{value:t.newEvent.description},on:{input:function(e){e.target.composing||t.$set(t.newEvent,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"popup-buttons"},[n("button",{staticClass:"button",on:{click:t.updateEvent}},[t._v("Готово")]),t._v(" "),n("button",{staticClass:"button",on:{click:t.deleteSelectedEvent}},[t._v("Удалить")])])])])},staticRenderFns:[]};var E=n("VU/8")(b,D,!1,function(t){n("4wTC")},"data-v-834674ae",null).exports,y=n("DlMc"),_={events:[{id:1,title:"Stand-up",date:"10-06-2018 10:00",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:2,title:"Stand-up",date:"11-07-2018 10:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:3,title:"Stand-up",date:"12-08-2018 10:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:4,title:"Stand-up",date:"13-06-2018 10:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:5,title:"Stand-up",date:"14-08-2018 10:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:6,title:"Stand-up",date:"15-07-2018 10:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:7,title:"Stand-up",date:"16-06-2018 08:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:8,title:"Stand-up",date:"17-08-2018 08:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:9,title:"Stand-up",date:"18-07-2018 08:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]},{id:10,title:"Stand-up",date:"19-07-2018 08:40",participants:[{id:1,name:"Витя",surname:"Костин"},{id:2,name:"Дима",surname:"Молодцов"}]}]},C={name:"CalendarField",data:function(){return{currentMonth:null,currentYear:null,monthDictionary:{0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"},weekDays:{1:"Понедельник",2:"Вторник",3:"Среда",4:"Четверг",5:"Пятница",6:"Суббота",0:"Воскресенье"},initialMonth:{0:[{},{},{},{},{},{},{}],1:[{},{},{},{},{},{},{}],2:[{},{},{},{},{},{},{}],3:[{},{},{},{},{},{},{}],4:[{},{},{},{},{},{},{}],5:[{},{},{},{},{},{},{}]},showingMonth:{},eventsList:[],searchedEventList:[],database:null}},components:{ADay:g,APopup:E},computed:{today:function(){var t=new Date(Date.now());return t},month:function(){return this.monthDictionary[this.currentMonth]||""}},watch:{currentMonth:function(){var t=new Date(this.currentYear,this.currentMonth,1);this.getMonth(t),localStorage.setItem("savedDate",m()({date:t}))},database:function(){var t=new Date(this.currentYear,this.currentMonth,1);this.getMonth(t)}},methods:{calculateNewDate:function(t,e){return new Date(t.setDate(t.getDate()+e))},prepareCalendar:function(t){var e=this,n=t.getMonth(),a=t.getFullYear(),i=new Date(a,n,1),s=i.getDay(),r=0;switch(s){case 0:r=-6;break;case 1:break;default:r=1-s}var o=this.calculateNewDate(i,r-1);this.showingMonth=h()({},this.initialMonth);var u=function(t){var n=new Date(o.getFullYear(),o.getMonth(),o.getDate());Date(n.setDate(n.getDate()+7*Number(t))),e.showingMonth[t]=e.showingMonth[t].map(function(a){return n=new Date(n.setDate(n.getDate()+1)),Number(t)?h()({},a,{dayName:"",date:n.getDate(),month:n.getMonth(),year:n.getFullYear(),week:t,id:Object(y.v4)()}):h()({},a,{dayName:e.weekDays[n.getDay()],date:n.getDate(),month:n.getMonth(),year:n.getFullYear(),week:t,id:Object(y.v4)()})})};for(var c in this.initialMonth)u(c)},initialLoading:function(){var t=localStorage.getItem("savedDate"),e=t?new Date(JSON.parse(t).date):this.today;this.setCurrentMonth(e)},getMonth:function(t){var e,n,a;this.prepareCalendar(t),this.eventsList=(e=this.database,n=this.currentMonth,a=this.currentYear,e.events.filter(function(t){return t.date.includes(n+1+"-"+a)}))},getPreviousMonth:function(){if(0===Number(this.currentMonth))return this.currentMonth=11,void(this.currentYear=this.currentYear-1);this.currentMonth=this.currentMonth-1,this.closePopupWindow()},getNextMonth:function(){if(11===Number(this.currentMonth))return this.currentMonth=0,void(this.currentYear=this.currentYear+1);this.currentMonth=this.currentMonth+1,this.closePopupWindow()},setCurrentMonth:function(t){this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear()},getShortDate:function(t){return t.getDate()+"-"+t.getMonth()+"-"+t.getFullYear()},highlightToday:function(t,e){var n=this.showingMonth[Number(t)].find(function(t){return t.id===e});return n.date+"-"+n.month+"-"+n.year===this.getShortDate(this.today)?"is-today":""},getFullDate:function(t){return(t.date<10?"0"+t.date:t.date)+"-"+(t.month+1<10?"0"+(t.month+1):t.month+1)+"-"+t.year},getEventForDate:function(t){return this.eventsList.find(function(e){return e.date.includes(t)})||null},highlightEventDay:function(t){return null!==t?"event-day":""},highlightDay:function(t){return[this.highlightToday(t.week,t.id),this.highlightEventDay(this.getEventForDate(this.getFullDate(t)))].join(" ")},showPopupWindow:function(t,e,n,a){var s=document.querySelector(".calendar-body").offsetWidth/7*(n+1)+55,r=document.querySelector(".calendar-body").offsetHeight/6*e+60;i.$emit("showPopup",t,a,r,s)},closePopupWindow:function(){i.$emit("closePopup")},deleteEvent:function(t){this.database=h()({},this.database,{events:this.database.events.filter(function(e){return e.id!==t})})},updateEvent:function(t){this.database=h()({},this.database,{events:[].concat(p()(this.database.events.filter(function(e){return e.id!==t.id})),[t])})},createEvent:function(t){t=h()({},t,{id:Object(y.v4)()}),this.database=h()({},this.database,{events:[].concat(p()(this.database.events),[t])})}},mounted:function(){var t=this;this.database=h()({},_,{events:_.events.map(function(t){return h()({},t)})}),this.initialLoading(),i.$on("searchingStarted",function(e){var n,a;t.searchedEventList=(n=t.database,(a=e)?n.events.filter(function(t){return t.title.includes(a)}):[]),i.$emit("showDropDown",{isSearchList:!0,searchedEventList:t.searchedEventList})}),i.$on("deleteEvent",function(e){return t.deleteEvent(e)}),i.$on("updateEvent",function(e){return t.updateEvent(e)}),i.$on("createEvent",function(e){return t.createEvent(e)})},destroyed:function(){i.$off("searchingStarted"),i.$off("updateEvent"),i.$off("createEvent")}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container calendar"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 calendar-header"},[n("button",{staticClass:"btn btn-sm btn-outline-secondary button arrow-left",on:{click:t.getPreviousMonth}}),t._v(" "),n("span",{staticClass:"month"},[t._v("\n        "+t._s(t.month)+" "+t._s(t.currentYear)+"\n      ")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-secondary button arrow-right",on:{click:t.getNextMonth}}),t._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-secondary button",on:{click:function(e){t.setCurrentMonth(t.today)}}},[t._v("\n        Сегодня\n      ")])])]),t._v(" "),n("table",{staticClass:"table calendar-body"},t._l(t.showingMonth,function(e,a){return n("tr",{key:JSON.stringify(e)},t._l(e,function(e,i){return n("td",{key:e.id,staticClass:"week-day",class:t.highlightDay(e),on:{click:function(n){t.showPopupWindow(e,a,i,t.getEventForDate(t.getFullDate(e)))}}},[n("a-day",{attrs:{date:e.date.toString(),dayName:e.dayName,event:t.getEventForDate(t.getFullDate(e))}})],1)}))})),t._v(" "),n("a-popup")],1)},staticRenderFns:[]};var P={name:"App",data:function(){return{}},components:{AHeader:c,ACalendarField:n("VU/8")(C,M,!1,function(t){n("6oi9")},"data-v-512ed446",null).exports}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("a-header"),this._v(" "),e("a-calendar-field")],1)},staticRenderFns:[]};var $=n("VU/8")(P,S,!1,function(t){n("FHhW")},"data-v-7dc31cf5",null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:$},template:"<App/>"})},QBaJ:function(t,e){},W0Y6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.2cd3f215851394f1bed8.js.map